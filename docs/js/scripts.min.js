"use strict";const appendForms=document.getElementById("append-forms"),account=document.getElementById("account"),loginButton=document.getElementById("login-button"),singInButton=document.getElementById("sing-in-button"),logoutButton=document.getElementById("logout-button"),deleteAccount=document.getElementById("delete-account-button"),time=1900;let isLogin=!1;const urlPage=window.location,insertForm=(e,t,a=!1)=>{const n=document.getElementById(e),l=document.getElementById(t);if(n&&l){const e=document.importNode(n.content,!0);a&&(l.textContent=""),l.appendChild(e)}},alertEmptyField=(e,t,a)=>{e.classList.add(t),setTimeout(()=>{e.classList.remove(t)},a)},changePlaceholderValue=(e,t,a,n)=>{e.placeholder=t,setTimeout(()=>{e.placeholder=a},n)},redirect=()=>{isLogin?urlPage.replace(urlPage.origin+"/login/"):isLogin||urlPage.replace(urlPage.origin+"/")},ls=localStorage,setUser=e=>{if(null===ls.getItem("users")){const t=[];t.push(e),ls.setItem("users",JSON.stringify(t))}else{const t=JSON.parse(ls.getItem("users"));t.push(e),ls.setItem("users",JSON.stringify(t))}},getUsers=()=>{JSON.parse(ls.getItem("users")).forEach(e=>{console.log(e)})},apikey="8651a58e",link="http://www.omdbapi.com/?apikey=8651a58e&s=avenger&plot=full";account.addEventListener("click",e=>{if(e.target===loginButton){insertForm("login-template","append-forms",!0);const e=document.getElementById("login-form");e.addEventListener("submit",t=>{t.preventDefault();const a=e.loginName.value.trim(),n=e.loginPass.value.trim();if(""!==a&&""!==n){setUser({id:`${a}${n}`,userName:a,password:n}),e.reset(),isLogin=!0,redirect()}else""==a&&(alertEmptyField(e.loginName,"alert",1900),changePlaceholderValue(e.loginName,"Ingresa un usuario","Usuario",1900)),""==n&&(alertEmptyField(e.loginPass,"alert",1900),changePlaceholderValue(e.loginPass,"Ingresa una contraseña","Contraseña",1900))})}if(e.target===singInButton){insertForm("sing-in-template","append-forms",!0);const e=document.getElementById("sing-in-form"),t=e.singInName,a=e.singInPass,n=e.repeatPass;e.addEventListener("submit",l=>{if(l.preventDefault(),""!==t.value.trim()&&""!==a.value.trim()&&""!==n.value.trim())if(a.value.trim()===n.value.trim()){const l={id:`${t.value.trim()}${a.value.trim()}`,favoriteMovies:[]};setUser(l),e.reset(),n.classList.remove("equal-to"),isLogin=!0,redirect()}else alertEmptyField(n,"alert",1900);else""==t.value.trim()&&(alertEmptyField(t,"alert",1900),changePlaceholderValue(t,"Ingresa un usuario","Usuario",1900)),""==a.value.trim()&&(alertEmptyField(a,"alert",1900),changePlaceholderValue(a,"Ingresa una contraseña","Contraseña",1900)),""==n.value.trim()&&(alertEmptyField(n,"alert",1900),changePlaceholderValue(n,"Repite la contraseña","Repite la contraseña",1900))}),e.addEventListener("keyup",()=>{const e=a.value.trim(),t=n.value.trim();""!==e&&""!==n&&(t===e?n.classList.add("equal-to"):n.classList.remove("equal-to"))})}e.target===logoutButton&&(isLogin=!1,redirect()),e.target});