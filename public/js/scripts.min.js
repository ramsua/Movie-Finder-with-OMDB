"use strict";const appendForms=document.getElementById("append-forms"),account=document.getElementById("account"),time=1900;let isLoggedIn=!1;const insertTemplate=(e,t,s=!1)=>{const a=document.getElementById(e),n=document.getElementById(t);if(a&&n){const e=document.importNode(a.content,!0);s&&(n.textContent=""),n.appendChild(e)}else console.error(`La función insertTemplate() dice: El elemento ${e} o ${t} no existen.`)},alertEmptyField=(e,t,s,a=!1)=>{e?(e.classList.add(t),a&&(e.setAttribute("type","text"),e.value="Las contraseñas deben coincidir",setTimeout(()=>{e.setAttribute("type","password"),e.value=""},s)),setTimeout(()=>{e.classList.remove(t)},s)):console.error(`La función "alertEmptyField()" dice: El elemento "${e}" no existe.`)},changePlaceholderValue=(e,t,s,a)=>{e?(e.placeholder=t,setTimeout(()=>{e.placeholder=s},a)):console.error(`La función "changePlaceholderValue()" dice: El elemento "${e}" no existe.`)},replaceClass=(e,t,s)=>{e&&e.classList.contains(t)?e.classList.replace(t,s):console.error(`La función "replaceClass()" dice: El elemento "${e}" no existe o no tiene la clase "${t}".`)},insertIfLoggedIn=()=>{var e,t,s;isLoggedIn&&(t="forms__modal--account",s="forms__modal--search",(e=appendForms)&&e.classList.contains(t)?e.classList.replace(t,s):console.error(`La función "replaceClass()" dice: El elemento "${e}" no existe o no tiene la clase "${t}".`),insertTemplate("search-template","append-forms",!0),insertTemplate("logged-in-template","account",!0))},ls=localStorage,setUser=e=>{if(null===ls.getItem("users")){const t=[];t.push(e),ls.setItem("users",JSON.stringify(t))}else{const t=JSON.parse(ls.getItem("users"));t.push(e),ls.setItem("users",JSON.stringify(t))}},getUsers=()=>{JSON.parse(ls.getItem("users")).forEach(e=>{console.log(e)})},apikey="8651a58e",link="http://www.omdbapi.com/?apikey=8651a58e&s=avenger&plot=full";document.addEventListener("DOMContentLoaded",()=>{insertTemplate("login-and-register-template","account");const e=document.getElementById("login-button"),t=document.getElementById("sing-in-button");account.addEventListener("click",s=>{if(s.target===e){insertTemplate("login-template","append-forms",!0);const e=document.getElementById("login-form");e.addEventListener("submit",t=>{t.preventDefault();const s=e.loginName.value.trim(),a=e.loginPass.value.trim();if(""!==s&&""!==a){const e={id:`${s}${a}`};console.log(e),isLoggedIn=!0,insertIfLoggedIn()}else""==s&&(alertEmptyField(e.loginName,"alert",1900),changePlaceholderValue(e.loginName,"Ingresa un usuario","Usuario",1900)),""==a&&(alertEmptyField(e.loginPass,"alert",1900),changePlaceholderValue(e.loginPass,"Ingresa una contraseña","Contraseña",1900))})}if(s.target===t){insertTemplate("sing-in-template","append-forms",!0);const e=document.getElementById("sing-in-form"),t=e.singInName,s=e.singInPass,a=e.repeatPass;e.addEventListener("submit",n=>{n.preventDefault();const l=t.value.trim(),o=s.value.trim(),r=a.value.trim();if(""!==l&&""!==o&&""!==r)if(o===r){setUser({id:`${l}${o}`,favoriteMovies:[]}),isLoggedIn=!0,insertIfLoggedIn()}else alertEmptyField(a,"alert",1900,!0);else""==t.value.trim()&&(alertEmptyField(e.singInName,"alert",1900),changePlaceholderValue(e.singInName,"Ingresa un usuario","Usuario",1900)),""==s.value.trim()&&(alertEmptyField(e.singInPass,"alert",1900),changePlaceholderValue(e.singInPass,"Ingresa una contraseña","Contraseña",1900)),""==a.value.trim()&&(alertEmptyField(e.repeatPass,"alert",1900),changePlaceholderValue(e.repeatPass,"Repite la contraseña","Repite la contraseña",1900))}),e.addEventListener("keyup",()=>{const e=s.value.trim(),t=a.value.trim();""!==e&&""!==a&&(t===e?a.classList.add("equal-to"):a.classList.remove("equal-to"))})}})});